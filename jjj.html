<!DOCTYPE html>
<html>
<head>
  <title>Vue Form Validation</title>
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
  <div id="app">
    <form @submit.prevent="handleSubmit" ref="form">
      <p v-if="errors.length">
        <b>Please correct the following error(s):</b>
        <ul>
          <li v-for="error in errors" :key="error">{{ error }}</li>
        </ul>
      </p>
      <p>
        <label for="name">Name</label>
        <input type="text" v-model="name" id="name">
      </p>
      <p>
        <label for="email">Email</label>
        <input type="text" v-model="email" id="email">
      </p>
      <p>
        <button type="button" @click="handleButtonClick">Check Form</button>
      </p>
      <p>
        <button type="submit">Submit</button>
      </p>
    </form>
  </div>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          name: "",
          email: "",
          errors: [],
        };
      },
      methods: {
        checkForm() {
          this.errors = [];

          if (!this.name) {
            this.errors.push("Name required.");
          }
          if (!this.email) {
            this.errors.push("Email required.");
          } else if (!this.validEmail(this.email)) {
            this.errors.push("Valid email required.");
          }

          return !this.errors.length;
        },
        validEmail(email) {
          const re =
            /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          return re.test(email);
        },
        handleSubmit() {
          if (this.checkForm()) {
            // Form is valid, submit it
            this.$refs.form.submit();
          }
        },
        handleButtonClick() {
          if (this.checkForm()) {
            // Form is valid, submit it
            this.$refs.form.submit();
          } else {
            alert("Form is invalid");
          }
        },
      },
    }).mount("#app");
  </script>
</body>
</html>
